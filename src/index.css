@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800;900&family=JetBrains+Mono:wght@500;800&display=swap');

:root {
  --bg-dark: #02040a;
  --bg-card: rgba(13, 17, 23, 0.7);
  --accent-cyan: #00f2fe;
  --accent-blue: #4facfe;
  --accent-red: #ff4d4d;
  --accent-gold: #f6e05e;
  --text-main: #e6edf3;
  --text-dim: #8b949e;
  --glass: rgba(255, 255, 255, 0.03);
  --glass-stroke: rgba(255, 255, 255, 0.08);
  --radius-lg: 24px;
  --sidebar-w: 240px;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Outfit', sans-serif;
  background: var(--bg-dark);
  color: var(--text-main);
  overflow: hidden;
  height: 100vh;
  /* Cinematic Background */
  background: radial-gradient(circle at center, #0d1117 0%, #010409 100%);
}

.app-wrapper {
  display: flex;
  height: 100vh;
  width: 100vw;
  position: relative;
}

/* --- CINEMATIC OVERLAYS --- */
.ambient-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(circle at 20% 30%, rgba(0, 242, 254, 0.05) 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(245, 101, 101, 0.05) 0%, transparent 40%);
}

/* --- PAUSE OVERLAY --- */
.pause-overlay {
  position: fixed;
  inset: 0;
  z-index: 9998;
  background: rgba(0, 0, 0, 0.85);
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}

.pause-modal {
  background: var(--bg-card);
  border: 2px solid var(--accent-cyan);
  border-radius: 24px;
  padding: 3rem 4rem;
  text-align: center;
  box-shadow: 0 0 50px rgba(0, 242, 254, 0.3);
  animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.pause-modal h2 {
  font-size: 2.5rem;
  margin-bottom: 1rem;
  background: linear-gradient(to right, var(--accent-cyan), #fff);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.pause-modal p {
  font-size: 1.2rem;
  color: var(--text-dim);
  margin-bottom: 2rem;
}

.btn-resume {
  padding: 1rem 3rem;
  background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
  border: none;
  color: #000;
  border-radius: 50px;
  font-weight: 900;
  font-size: 1.2rem;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 0 20px rgba(0, 242, 254, 0.3);
}

.btn-resume:hover {
  transform: scale(1.1);
  box-shadow: 0 0 40px rgba(0, 242, 254, 0.6);
}

@keyframes scaleIn {
  from {
    transform: scale(0.8);
    opacity: 0;
  }

  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* --- RESULT SCREENS (Victory/Defeat) --- */
.result-screen {
  position: relative;
  width: 90vw;
  max-width: 700px;
  background: linear-gradient(135deg, rgba(13, 17, 23, 0.95), rgba(1, 4, 9, 0.98));
  border-radius: 32px;
  padding: 4rem 3rem;
  text-align: center;
  overflow: hidden;
  animation: resultSlideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: 0 30px 90px rgba(0, 0, 0, 0.9);
}

@keyframes resultSlideIn {
  from {
    transform: scale(0.8) translateY(50px);
    opacity: 0;
  }
  to {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

/* Animated Background Particles */
.result-particles {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.result-particles::before,
.result-particles::after {
  content: '';
  position: absolute;
  width: 300px;
  height: 300px;
  border-radius: 50%;
  filter: blur(80px);
  animation: particleFloat 8s ease-in-out infinite;
}

.victory-screen .result-particles::before {
  background: radial-gradient(circle, rgba(246, 224, 94, 0.3), transparent);
  top: -100px;
  left: -100px;
}

.victory-screen .result-particles::after {
  background: radial-gradient(circle, rgba(0, 242, 254, 0.2), transparent);
  bottom: -100px;
  right: -100px;
  animation-delay: 4s;
}

.defeat-screen .result-particles::before {
  background: radial-gradient(circle, rgba(255, 77, 77, 0.3), transparent);
  top: -100px;
  right: -100px;
}

.defeat-screen .result-particles::after {
  background: radial-gradient(circle, rgba(139, 0, 0, 0.2), transparent);
  bottom: -100px;
  left: -100px;
  animation-delay: 4s;
}

@keyframes particleFloat {
  0%, 100% { transform: translate(0, 0) scale(1); }
  50% { transform: translate(30px, -30px) scale(1.1); }
}

/* Center Glow */
.result-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 400px;
  height: 400px;
  background: radial-gradient(circle, rgba(246, 224, 94, 0.15), transparent);
  filter: blur(60px);
  animation: glowPulse 3s ease-in-out infinite;
}

.defeat-glow {
  background: radial-gradient(circle, rgba(255, 77, 77, 0.15), transparent);
}

@keyframes glowPulse {
  0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
  50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.1); }
}

/* Result Icon */
.result-icon {
  position: relative;
  margin: 0 auto 2rem;
  width: 180px;
  height: 180px;
  z-index: 10;
}

.icon-circle {
  width: 180px;
  height: 180px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  animation: iconBounce 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.victory-icon .icon-circle {
  background: linear-gradient(135deg, #f6e05e, #ffd700);
  box-shadow: 
    0 0 60px rgba(246, 224, 94, 0.6),
    0 20px 40px rgba(0, 0, 0, 0.5),
    inset 0 -10px 30px rgba(0, 0, 0, 0.2);
}

.defeat-icon .icon-circle {
  background: linear-gradient(135deg, #ff4d4d, #b91c1c);
  box-shadow: 
    0 0 60px rgba(255, 77, 77, 0.6),
    0 20px 40px rgba(0, 0, 0, 0.5),
    inset 0 -10px 30px rgba(0, 0, 0, 0.2);
}

@keyframes iconBounce {
  0% { transform: scale(0) rotate(-180deg); }
  60% { transform: scale(1.2) rotate(20deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.icon-emoji {
  font-size: 5rem;
  filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
  animation: emojiFloat 3s ease-in-out infinite;
}

@keyframes emojiFloat {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

/* Icon Rays (Victory) */
.icon-rays {
  position: absolute;
  inset: -20px;
  border-radius: 50%;
  background: conic-gradient(
    from 0deg,
    transparent 0deg 30deg,
    rgba(246, 224, 94, 0.3) 30deg 60deg,
    transparent 60deg 90deg,
    rgba(246, 224, 94, 0.3) 90deg 120deg,
    transparent 120deg 150deg,
    rgba(246, 224, 94, 0.3) 150deg 180deg,
    transparent 180deg 210deg,
    rgba(246, 224, 94, 0.3) 210deg 240deg,
    transparent 240deg 270deg,
    rgba(246, 224, 94, 0.3) 270deg 300deg,
    transparent 300deg 330deg,
    rgba(246, 224, 94, 0.3) 330deg 360deg
  );
  animation: raysRotate 8s linear infinite;
  z-index: -1;
}

.defeat-icon .icon-rays {
  display: none;
}

@keyframes raysRotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Icon Cracks (Defeat) */
.icon-cracks {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: 
    linear-gradient(45deg, transparent 48%, rgba(0, 0, 0, 0.5) 49%, rgba(0, 0, 0, 0.5) 51%, transparent 52%),
    linear-gradient(-45deg, transparent 48%, rgba(0, 0, 0, 0.5) 49%, rgba(0, 0, 0, 0.5) 51%, transparent 52%);
  opacity: 0.3;
  animation: cracksAppear 0.5s ease-out 0.3s both;
}

@keyframes cracksAppear {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 0.3; transform: scale(1); }
}

/* Result Title */
.result-title {
  font-size: 4.5rem;
  font-weight: 900;
  letter-spacing: 8px;
  margin: 0 0 0.5rem;
  position: relative;
  z-index: 10;
  text-transform: uppercase;
  font-style: italic;
  animation: titleSlideIn 0.6s ease-out 0.2s both;
}

@keyframes titleSlideIn {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.victory-title {
  background: linear-gradient(135deg, #f6e05e, #fff, #f6e05e);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 0 30px rgba(246, 224, 94, 0.8));
}

.defeat-title {
  background: linear-gradient(135deg, #ff4d4d, #fff, #ff4d4d);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 0 30px rgba(255, 77, 77, 0.8));
}

.result-subtitle {
  font-size: 1.3rem;
  color: var(--text-dim);
  margin: 0 0 3rem;
  animation: titleSlideIn 0.6s ease-out 0.3s both;
}

/* Result Stats */
.result-stats {
  display: flex;
  justify-content: center;
  gap: 3rem;
  margin: 3rem 0;
  animation: statsSlideIn 0.6s ease-out 0.4s both;
}

@keyframes statsSlideIn {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.stat-item {
  text-align: center;
}

.stat-label {
  font-size: 0.85rem;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 0.5rem;
  font-weight: 700;
}

.stat-value {
  font-size: 2.5rem;
  font-weight: 900;
  font-family: 'JetBrains Mono', monospace;
  background: linear-gradient(135deg, var(--accent-cyan), #fff);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Result Team */
.result-team {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin: 3rem 0;
  animation: teamSlideIn 0.6s ease-out 0.5s both;
}

@keyframes teamSlideIn {
  from {
    transform: scale(0.8);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.result-char {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  background: rgba(255, 255, 255, 0.05);
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  transition: all 0.3s;
}

.result-char.alive {
  border-color: rgba(72, 187, 120, 0.5);
  background: rgba(72, 187, 120, 0.1);
}

.result-char.dead {
  opacity: 0.5;
  filter: grayscale(1);
}

.result-char-emoji {
  font-size: 3rem;
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
}

.result-char-hp {
  font-size: 0.9rem;
  font-weight: 800;
  font-family: 'JetBrains Mono', monospace;
  color: var(--accent-cyan);
}

/* Result Button */
.btn-result {
  display: inline-flex;
  align-items: center;
  gap: 1rem;
  padding: 1.2rem 3rem;
  font-size: 1.3rem;
  font-weight: 900;
  border-radius: 60px;
  border: none;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  text-transform: uppercase;
  letter-spacing: 2px;
  position: relative;
  overflow: hidden;
  animation: btnSlideIn 0.6s ease-out 0.6s both;
  z-index: 10;
}

@keyframes btnSlideIn {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.victory-btn {
  background: linear-gradient(135deg, #f6e05e, #ffd700);
  color: #000;
  box-shadow: 0 10px 40px rgba(246, 224, 94, 0.4);
}

.victory-btn:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 20px 60px rgba(246, 224, 94, 0.6);
}

.defeat-btn {
  background: linear-gradient(135deg, #ff4d4d, #b91c1c);
  color: #fff;
  box-shadow: 0 10px 40px rgba(255, 77, 77, 0.4);
}

.defeat-btn:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 20px 60px rgba(255, 77, 77, 0.6);
}

.btn-home {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
  color: #fff;
  border: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  margin-top: 1rem;
}

.btn-home:hover {
  transform: translateY(-5px) scale(1.05);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
  border-color: rgba(255, 255, 255, 0.5);
  box-shadow: 0 20px 60px rgba(255, 255, 255, 0.2);
}

.btn-icon {
  font-size: 1.8rem;
}

/* Overlay Backgrounds */
.pause-overlay.victory {
  background: 
    radial-gradient(circle at 30% 30%, rgba(246, 224, 94, 0.15), transparent 50%),
    radial-gradient(circle at 70% 70%, rgba(0, 242, 254, 0.1), transparent 50%),
    rgba(0, 0, 0, 0.85);
}

.pause-overlay.defeat {
  background: 
    radial-gradient(circle at 30% 30%, rgba(255, 77, 77, 0.15), transparent 50%),
    radial-gradient(circle at 70% 70%, rgba(139, 0, 0, 0.1), transparent 50%),
    rgba(0, 0, 0, 0.85);
}


/* --- ELEMENT BADGE --- */
.element-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.9rem;
  border: 2px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  z-index: 5;
}

.setup-slot-element {
  font-size: 0.9rem;
  font-weight: 800;
  margin-bottom: 0.5rem;
  text-align: center;
}

/* --- CARD TYPE STYLING --- */
.card-ultimate {
  border-color: #ff4d4d !important;
  box-shadow: 0 0 20px rgba(255, 77, 77, 0.3);
}

.card-passive {
  border-color: #f6e05e !important;
  box-shadow: 0 0 20px rgba(246, 224, 94, 0.3);
}

.card-normal {
  border-color: var(--glass-stroke);
}

.passive-card {
  cursor: not-allowed !important;
  filter: grayscale(0.3);
}

.card-type-badge {
  position: absolute;
  top: -10px;
  left: -10px;
  font-size: 1.5rem;
  filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.8));
  z-index: 10;
}

.mini-card-detail.card-ultimate {
  border-color: rgba(255, 77, 77, 0.5);
  background: rgba(255, 77, 77, 0.05);
}

.mini-card-detail.card-passive {
  border-color: rgba(246, 224, 94, 0.5);
  background: rgba(246, 224, 94, 0.05);
}

.mini-card-detail.card-normal {
  border-color: var(--glass-stroke);
}


/* --- FLOATING SIDEBAR LEFT --- */
.sidebar-left {
  width: var(--sidebar-w);
  padding: 2rem 1rem;
  z-index: 10;
  display: flex;
  flex-direction: column;
  background: linear-gradient(to right, rgba(1, 4, 9, 0.8), transparent);
  backdrop-filter: blur(10px);
}

.brand {
  font-size: 1.8rem;
  font-weight: 900;
  letter-spacing: -1px;
  margin-bottom: 3rem;
  background: linear-gradient(to bottom, #fff, #8b949e);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
}

.char-mini {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0.8rem;
  margin-bottom: 1rem;
  background: var(--glass);
  border: 1px solid var(--glass-stroke);
  border-radius: 16px;
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.char-mini:hover {
  transform: translateX(10px);
  background: rgba(255, 255, 255, 0.05);
  border-color: var(--accent-cyan);
}

.char-mini-emoji {
  font-size: 1.8rem;
  filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.2));
}

.char-mini-hp {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.8rem;
  color: var(--accent-cyan);
  font-weight: 800;
}

.setup-item-skills {
  display: flex;
  gap: 4px;
  margin-top: 4px;
  flex-wrap: wrap;
}

.mini-tag-sidebar {
  font-size: 0.6rem;
  background: rgba(255, 255, 255, 0.05);
  padding: 2px 6px;
  border-radius: 4px;
  border: 1px solid var(--glass-stroke);
  color: var(--text-dim);
}

/* --- SETUP SCREEN --- */
.setup-screen {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 3rem;
  animation: fadeIn 0.5s ease;
}

.setup-title {
  font-size: 2.5rem;
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 4px;
  background: linear-gradient(to right, var(--accent-cyan), #fff);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.setup-grid {
  display: flex;
  gap: 2rem;
  perspective: 1000px;
}

.setup-slot {
  width: 380px;
  min-height: 480px;
  padding: 1.5rem 1rem;
  background: var(--bg-card);
  border: 2px dashed var(--glass-stroke);
  border-radius: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  position: relative;
}

.setup-slot.active-slot {
  border-style: solid;
  border-color: var(--accent-cyan);
  background: linear-gradient(165deg, rgba(0, 242, 254, 0.05), transparent);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
  transform: translateY(-10px);
}

.setup-slot-emoji {
  font-size: 5rem;
  margin-bottom: 1rem;
  filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.2));
}

.setup-slot-name {
  font-size: 1.5rem;
  font-weight: 800;
  color: #fff;
  margin-bottom: 0.5rem;
}

.setup-slot-ability {
  font-size: 0.85rem;
  color: var(--accent-cyan);
  text-align: center;
  padding: 0 1.5rem;
  line-height: 1.4;
  margin-bottom: 1rem;
}

.setup-slot-cards-detailed {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  width: 100%;
  margin-top: 1rem;
}

.mini-card-detail {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--glass-stroke);
  border-radius: 12px;
  padding: 8px 12px;
  transition: all 0.3s;
}

.mini-card-detail:hover {
  background: rgba(0, 242, 254, 0.1);
  border-color: var(--accent-cyan);
}

.mini-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
}

.mini-card-name {
  font-weight: 800;
  font-size: 0.85rem;
  color: #fff;
}

.mini-card-energy {
  font-size: 0.75rem;
  color: var(--accent-gold);
}

.mini-card-stats {
  display: flex;
  gap: 8px;
  margin-bottom: 4px;
}

.mini-card-stats span {
  font-size: 0.7rem;
  font-weight: 800;
}

.stat-dmg {
  color: var(--accent-red);
}

.stat-shd {
  color: var(--accent-blue);
}

.stat-heal {
  color: #48bb78;
}

.mini-card-desc {
  font-size: 0.7rem;
  color: var(--text-dim);
  line-height: 1.2;
}

.remove-btn {
  position: absolute;
  top: 15px;
  right: 15px;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background: rgba(255, 77, 77, 0.2);
  border: 1px solid rgba(255, 77, 77, 0.5);
  color: var(--accent-red);
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all 0.3s;
  z-index: 5;
}

.remove-btn:hover {
  background: var(--accent-red);
  color: #fff;
  transform: rotate(90deg);
}

.empty-slot {
  opacity: 0.5;
}

.setup-slot-text {
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: 2px;
  font-weight: 800;
}

.btn-start-battle {
  padding: 1.2rem 5rem;
  font-size: 1.2rem;
  font-weight: 900;
  border-radius: 100px;
  border: none;
  background: var(--text-dim);
  color: #000;
  cursor: not-allowed;
  transition: all 0.4s;
}

.btn-start-battle.ready {
  background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
  cursor: pointer;
  box-shadow: 0 0 30px rgba(0, 242, 254, 0.4);
}

.btn-start-battle.ready:hover {
  transform: scale(1.1) translateY(-5px);
  box-shadow: 0 20px 60px rgba(0, 242, 254, 0.6);
}

.setup-item.selected {
  border-color: var(--accent-cyan);
  background: rgba(0, 242, 254, 0.1);
  box-shadow: inset 0 0 20px rgba(0, 242, 254, 0.2);
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* --- LOADING SCREEN --- */
.loading-screen {
  position: fixed;
  inset: 0;
  z-index: 10000;
  background: radial-gradient(circle at center, #0d1117 0%, #010409 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

.loading-content {
  text-align: center;
  animation: fadeIn 0.5s ease;
}

.loading-spinner {
  font-size: 5rem;
  animation: spin 2s linear infinite;
  margin-bottom: 2rem;
}

.loading-content h2 {
  font-size: 2rem;
  margin-bottom: 1rem;
  background: linear-gradient(to right, var(--accent-cyan), var(--accent-blue));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.loading-content p {
  color: var(--text-dim);
  font-size: 1.1rem;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* --- MAIN ARENA --- */
.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100vh;
  position: relative;
  z-index: 1;
  overflow: hidden;
}

.team {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  position: relative;
  z-index: 5;
}

.battle-arena {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  /* Center horizontally */
  justify-content: center;
  /* Center vertically */
  min-height: 0;
  overflow: hidden;
  position: relative;
}


/* EPIC HEADER */
.game-header {
  height: 120px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 2rem;
  background: linear-gradient(to bottom, rgba(1, 4, 9, 0.9), transparent);
}

.vs-master-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.vs-stat-bar {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  width: 100%;
  max-width: 700px;
}

.hp-bar-wrap {
  flex: 1;
  height: 24px;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 100px;
  overflow: hidden;
  border: 1px solid var(--glass-stroke);
  position: relative;
}

.hp-fill {
  height: 100%;
  transition: width 1s cubic-bezier(0.23, 1, 0.32, 1);
  border-radius: 100px;
}

.player-fill {
  background: linear-gradient(to right, #00f2fe, #4facfe);
  box-shadow: 0 0 15px var(--accent-blue);
}

.enemy-fill {
  background: linear-gradient(to left, #ff4d4d, #b91c1c);
  box-shadow: 0 0 15px var(--accent-red);
}

.vs-text {
  font-size: 1.8rem;
  font-weight: 950;
  font-style: italic;
  font-family: 'Outfit';
  color: #fff;
  text-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
}

.turn-order-list {
  display: flex;
  gap: 0.8rem;
  padding: 0.5rem 2rem;
  background: var(--bg-card);
  border-radius: 100px;
  border: 1px solid var(--glass-stroke);
  backdrop-filter: blur(10px);
  width: 100%;
  max-width: 700px;
  justify-content: center;
}

.order-icon {
  font-size: 2.2rem;
  opacity: 0.4;
  transition: all 0.4s;
  transform: scale(0.9);
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
}

.order-icon.active {
  opacity: 1;
  transform: scale(1.4) translateY(-4px);
  filter: drop-shadow(0 0 15px var(--accent-cyan)) drop-shadow(0 0 25px var(--accent-cyan));
}

/* GRID SYSTEM */
.battle-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: 1.5rem;
  width: 450px;
  height: 450px;
  position: relative;
}

.grid-slot {
  width: 120px;
  height: 120px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px dashed rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  transition: all 0.3s;
  cursor: pointer;
}

.grid-slot:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.3);
}

.grid-slot.highlight {
  background: rgba(0, 242, 254, 0.1);
  border-color: var(--accent-cyan);
  box-shadow: 0 0 15px rgba(0, 242, 254, 0.2);
}

.grid-slot.occupied {
  border-style: solid;
  background: rgba(255, 255, 255, 0.05);
}

.player-grid {
  transform: rotateY(0deg);
}

.enemy-grid {
  direction: rtl;
  /* For enemy side layout if needed */
}

/* Character in Grid Slot */
.char-on-grid {
  position: relative;
  z-index: 10;
  cursor: grab;
  transition: transform 0.2s;
}

.grid-hp-bar {
  position: absolute;
  bottom: 5px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 10px;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 5px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
}

.grid-hp-fill {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  transition: width 0.5s ease;
}

.grid-hp-bar span {
  position: relative;
  font-size: 0.5rem;
  font-weight: 800;
  color: #fff;
  z-index: 1;
}

/* BATTLE STAGE */
.battle-stage {
  width: 2000px;
  height: 650px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 15%;
  /* Adjust padding for wider stage */
  perspective: 1000px;
  position: relative;
}



/* Stage Floor */
.battle-stage::before {
  content: '';
  position: absolute;
  bottom: 15%;
  left: 50%;
  width: 120%;
  height: 400px;
  transform: translateX(-50%) rotateX(60deg);
  background:
    radial-gradient(ellipse at center, rgba(0, 242, 254, 0.05) 0%, transparent 70%),
    repeating-linear-gradient(rgba(255, 255, 255, 0.02) 0 1px, transparent 1px 40px),
    repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.02) 0 1px, transparent 1px 40px);
  z-index: 0;
}

.character-unit {
  position: relative;
  z-index: 10;
  width: 140px;
  height: 140px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  transform-style: preserve-3d;
  perspective: 1000px;
  /* Breathing Idle Animation */
  animation: breathing 3s ease-in-out infinite;
}

@keyframes breathing {
  0% {
    transform: translateY(0) rotateX(0deg);
  }

  50% {
    transform: translateY(-10px) rotateX(5deg);
  }

  100% {
    transform: translateY(0) rotateX(0deg);
  }
}

.character-unit.attacking-left,
.character-unit.attacking-right {
  animation: none;
  /* Stop breathing when attacking */
}

.char-shadow {
  position: absolute;
  bottom: -10px;
  width: 80%;
  height: 20px;
  background: radial-gradient(ellipse, rgba(0, 0, 0, 0.6), transparent);
  border-radius: 50%;
  filter: blur(8px);
  z-index: -1;
  animation: shadowPulse 3s ease-in-out infinite;
}

@keyframes shadowPulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.6;
  }
  50% {
    transform: scale(0.9);
    opacity: 0.4;
  }
}

.sprite-box {
  font-size: 5rem;
  transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  cursor: pointer;
  filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
  transform-style: preserve-3d;
  position: relative;
}

/* 3D Effect for sprite */
.sprite-box::before {
  content: attr(data-emoji);
  position: absolute;
  top: 0;
  left: 0;
  transform: translateZ(-10px);
  opacity: 0.3;
  filter: blur(2px);
}

.sprite-box::after {
  content: '';
  position: absolute;
  inset: -20%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.1), transparent);
  border-radius: 50%;
  transform: translateZ(-5px);
  opacity: 0;
  transition: opacity 0.3s;
}

.character-unit:hover .sprite-box::after {
  opacity: 1;
}

.character-unit.active .sprite-box {
  transform: scale(1.2) translateY(-20px) translateZ(20px);
  filter: drop-shadow(0 0 25px var(--accent-cyan)) drop-shadow(0 15px 30px rgba(0, 0, 0, 0.8));
}

/* ATTACK ANIMATIONS */
@keyframes attack-leap-left {
  0% {
    transform: translateX(0);
  }

  30% {
    transform: translateX(-30px) scale(0.9);
  }

  50% {
    transform: translateX(200px) scale(1.4);
  }

  100% {
    transform: translateX(0);
  }
}

@keyframes attack-leap-right {
  0% {
    transform: translateX(0) scaleX(-1);
  }

  30% {
    transform: translateX(30px) scale(0.9) scaleX(-1);
  }

  50% {
    transform: translateX(-200px) scale(1.4) scaleX(-1);
  }

  100% {
    transform: translateX(0) scaleX(-1);
  }
}

.attacking-left .sprite-box {
  animation: attack-leap-left 0.7s cubic-bezier(0.19, 1, 0.22, 1);
}

.attacking-right .sprite-box {
  animation: attack-leap-right 0.7s cubic-bezier(0.19, 1, 0.22, 1);
}

.character-unit.dead {
  filter: grayscale(1) opacity(0.3);
}

/* HIT ANIMATION - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏î‡∏ô‡πÇ‡∏à‡∏°‡∏ï‡∏µ */
.character-unit.hit-effect {
  animation: hitShake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97);
}

@keyframes hitShake {
  0%, 100% {
    transform: translateX(0) translateY(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-8px) translateY(-5px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(8px) translateY(5px);
  }
}

.character-unit.hit-effect .sprite-box {
  animation: hitFlash 0.4s ease-out;
  filter: drop-shadow(0 0 20px rgba(255, 77, 77, 0.8)) drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
}

@keyframes hitFlash {
  0% {
    filter: brightness(2) drop-shadow(0 0 30px rgba(255, 77, 77, 1));
  }
  50% {
    filter: brightness(1.5) drop-shadow(0 0 20px rgba(255, 77, 77, 0.6));
  }
  100% {
    filter: brightness(1) drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
  }
}

/* Hit Impact Effect */
.character-unit.hit-effect::after {
  content: 'üí•';
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 3rem;
  animation: impactBurst 0.5s ease-out forwards;
  pointer-events: none;
  z-index: 100;
}

@keyframes impactBurst {
  0% {
    opacity: 1;
    transform: translateX(-50%) scale(0.5);
  }
  50% {
    opacity: 1;
    transform: translateX(-50%) scale(1.2);
  }
  100% {
    opacity: 0;
    transform: translateX(-50%) scale(1.5) translateY(-30px);
  }
}

/* --- SIDEBAR RIGHT: Social & Logs --- */
.sidebar-right {
  width: 320px;
  max-height: 100vh;
  padding: 1.5rem;
  z-index: 10;
  display: flex;
  flex-direction: column;
  background: linear-gradient(to left, rgba(1, 4, 9, 0.9), transparent);
  backdrop-filter: blur(20px);
  overflow: hidden;
  /* Prevent sidebar itself from growing */
}

.chat-box {
  flex: 1.2;
  /* Chat takes more space */
  display: flex;
  flex-direction: column;
  gap: 1rem;
  background: var(--glass);
  border: 1px solid var(--glass-stroke);
  border-radius: 24px;
  padding: 1.2rem;
  margin-bottom: 1rem;
  min-height: 0;
  /* CRITICAL: allow flex child to shrink below content size */
  overflow: hidden;
}

.msg-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  padding-right: 4px;
  max-width: 100%;
  scroll-behavior: smooth;
}

.msg-item {
  font-size: 0.85rem;
  padding: 0.8rem;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 12px;
  border-left: 2px solid var(--glass-stroke);
  word-wrap: break-word;
  /* Fix long text overflow */
  max-width: 100%;
}

/* Make stickers larger in chat */
.msg-item div:only-child {
  font-size: 3rem;
  text-align: center;
  line-height: 1;
}

.sticker-panel {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 0.8rem;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 16px;
  justify-content: center;
}

.sticker-btn {
  font-size: 1.8rem;
  /* Slightly smaller to fit better but still large */
  background: transparent;
  border: none;
  cursor: pointer;
  transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  padding: 6px;
  border-radius: 12px;
}

.sticker-btn:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: scale(1.4) rotate(10deg);
}

/* --- BOTTOM UI: Hand of Cards --- */
.bottom-hand-section {
  flex-shrink: 0;
  height: 520px;
  background: linear-gradient(to top, #010409 60%, rgba(1, 4, 9, 0.9) 85%, transparent);
  padding: 0 2rem 2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 20;
  border-top: 1px solid rgba(255, 255, 255, 0.03);
}



.energy-orb {
  font-size: 2.22rem;
  font-weight: 900;
  color: var(--accent-gold);
  filter: drop-shadow(0 0 10px rgba(246, 224, 94, 0.4));
}

/* Discard System */
.discard-controls {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.btn-discard,
.btn-confirm-discard,
.btn-cancel-discard {
  padding: 0.8rem 1.5rem;
  border: none;
  border-radius: 12px;
  font-weight: 800;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.btn-discard {
  background: rgba(255, 165, 0, 0.2);
  border: 1px solid rgba(255, 165, 0, 0.5);
  color: #ffa500;
}

.btn-discard:hover:not(:disabled) {
  background: rgba(255, 165, 0, 0.3);
  transform: scale(1.05);
}

.btn-discard:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.btn-confirm-discard {
  background: linear-gradient(135deg, #48bb78, #38a169);
  color: #fff;
  box-shadow: 0 0 15px rgba(72, 187, 120, 0.3);
}

.btn-confirm-discard:hover:not(:disabled) {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(72, 187, 120, 0.5);
}

.btn-confirm-discard:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-cancel-discard {
  background: rgba(255, 77, 77, 0.2);
  border: 1px solid rgba(255, 77, 77, 0.5);
  color: var(--accent-red);
}

.btn-cancel-discard:hover {
  background: rgba(255, 77, 77, 0.3);
  transform: scale(1.05);
}

/* Discard Marked Card */
.battle-card.discard-marked {
  border-color: var(--accent-red);
  background: linear-gradient(135deg, rgba(255, 77, 77, 0.2), rgba(185, 28, 28, 0.2));
  box-shadow: 0 0 30px rgba(255, 77, 77, 0.5);
  opacity: 0.7;
}

.battle-card.discard-marked::after {
  content: 'üóëÔ∏è';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 4rem;
  opacity: 0.5;
  pointer-events: none;
  z-index: 100;
}

/* Action Row Layout */
.action-row {
  display: flex;
  justify-content: space-between;
  width: 100%;
  align-items: center;
  max-width: 1400px;
  margin-bottom: 0.3rem;
  height: 50px;
  gap: 1rem;
}

/* FUTURISTIC END TURN */
.end-turn-container {
  display: flex;
  justify-content: flex-end;
  flex: 1;
}

.btn-end-turn {
  padding: 1rem 4rem;
  background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
  border: none;
  color: #000;
  border-radius: 50px;
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 3px;
  cursor: pointer;
  transition: all 0.4s;
  box-shadow: 0 0 20px rgba(0, 242, 254, 0.3);
}

.btn-end-turn:hover:not(:disabled) {
  transform: scale(1.05) translateY(-5px);
  box-shadow: 0 15px 40px rgba(0, 242, 254, 0.6);
  filter: brightness(1.2);
}

.btn-end-turn:active {
  transform: scale(0.95);
}

.btn-end-turn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  filter: grayscale(1);
}

.battle-footer-content {
  width: 100%;
  max-width: 95vw;
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  margin: 0 auto;
}

.passives-row {
  display: flex;
  gap: 1.5rem;
  justify-content: center;
  padding: 0.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.passive-badge {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  background: rgba(255, 255, 255, 0.03);
  padding: 0.4rem 1rem;
  border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  min-width: 180px;
  transition: all 0.3s;
}

.passive-badge:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--accent-gold);
}

.passive-char-emoji {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
}

.passive-info {
  display: flex;
  flex-direction: column;
}

.passive-label {
  font-size: 0.6rem;
  font-weight: 900;
  color: var(--accent-gold);
  letter-spacing: 1px;
}

.passive-name {
  font-size: 0.85rem;
  font-weight: 800;
  color: #fff;
}

.hand-cards {
  display: flex;
  gap: 0.8rem;
  width: 100%;
  justify-content: center;
  padding: 1.5rem 0.5rem;
  overflow: visible;
  align-items: flex-end;
  min-height: 400px;
}

.hand-cards::-webkit-scrollbar {
  height: 6px;
}

.hand-cards::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 10px;
}

.hand-cards::-webkit-scrollbar-thumb {
  background: var(--accent-cyan);
  border-radius: 10px;
  box-shadow: 0 0 10px var(--accent-cyan);
}


.char-group-emoji {
  font-size: 1.1rem;
}

.char-group-name {
  font-size: 0.8rem;
  font-weight: 800;
  color: #fff;
}

.char-group-element {
  font-size: 0.65rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.2rem;
}

.char-cards-row {
  display: flex;
  gap: 0.5rem;
}

.battle-card {
  width: 200px;
  height: 300px;
  flex-shrink: 0;
  background: linear-gradient(135deg, #1e2128 0%, #16181d 100%);
  border-radius: 16px;
  border: 3px solid rgba(255, 255, 255, 0.15);
  padding: 3rem 1rem 1rem;
  position: relative;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  gap: 0.6rem;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
  z-index: 1;
}

.battle-card:hover {
  transform: translateY(-60px) scale(1.1) rotate(2deg);
  /* ‡πÄ‡∏î‡πâ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏™‡∏π‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
  border-color: var(--accent-cyan);
  box-shadow: 0 30px 60px rgba(0, 0, 0, 0.9), 0 0 30px rgba(0, 242, 254, 0.4);
  z-index: 100;
  /* ‡πÉ‡∏´‡πâ‡πÉ‡∏ö‡∏ó‡∏µ‡πà Hover ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î‡πÄ‡∏™‡∏°‡∏≠ */
}

.battle-card.selected {
  border: 2px solid var(--accent-cyan);
  box-shadow: 0 0 40px rgba(0, 242, 254, 0.6), 0 10px 30px rgba(0, 0, 0, 0.8);
  transform: translateY(-25px);
  background: linear-gradient(135deg, #1e2838 0%, #16181d 100%);
}

/* Combo Indicator */
.battle-card.combo-card {
  border-color: var(--accent-gold);
  box-shadow: 0 0 30px rgba(246, 224, 94, 0.5);
}

.battle-card.combo-card::after {
  content: 'COMBO';
  position: absolute;
  top: 8px;
  left: 8px;
  background: linear-gradient(135deg, #ffd700, #ff8c00);
  color: #000;
  font-size: 0.6rem;
  font-weight: 900;
  padding: 2px 8px;
  border-radius: 8px;
  letter-spacing: 1px;
  z-index: 20;
  animation: comboPulse 1s ease-in-out infinite;
}

@keyframes comboPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

.card-energy {
  position: absolute;
  top: -12px;
  right: -12px;
  width: 42px;
  height: 42px;
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  color: #000;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: 900;
  font-size: 1.2rem;
  z-index: 10;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6), 0 0 0 4px rgba(255, 215, 0, 0.3);
  border: 2px solid rgba(0, 0, 0, 0.3);
}

.card-title {
  font-size: 0.85rem;
  font-weight: 900;
  color: #ffffff;
  margin: 0;
  text-align: center;
  line-height: 1.2;
  word-wrap: break-word;
  overflow-wrap: break-word;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.6));
  padding: 0.5rem 0.4rem;
  border-radius: 8px;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 1);
  border: 1px solid rgba(255, 255, 255, 0.15);
  min-height: 2.4em;
  max-height: 3.6em;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.card-stats-vertical {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
  margin-top: 0.2rem;
}

.stat-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(0, 0, 0, 0.4);
  padding: 0.3rem 0.6rem;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.stat-left {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.stat-text {
  font-size: 1rem;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.7);
}

.stat-item.damage {
  border-left: 4px solid var(--accent-red);
}

.stat-item.shield {
  border-left: 4px solid var(--accent-cyan);
}

.stat-item.heal {
  border-left: 4px solid #00ff88;
}

.stat-icon {
  font-size: 1.1rem;
}

.stat-value {
  font-size: 1.1rem;
  font-weight: 900;
  font-family: 'JetBrains Mono';
  color: #fff;
}

.card-desc-container {
  margin-top: auto;
  background: rgba(0, 0, 0, 0.4);
  padding: 0.5rem;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  min-height: 3.5rem;
  max-height: 4.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.card-desc-text {
  font-size: 0.75rem;
  color: #fff;
  line-height: 1.3;
  text-align: center;
  word-wrap: break-word;
  overflow-wrap: break-word;
  overflow: hidden;
}

.card-char-icon {
  position: absolute;
  top: 10px;
  left: 10px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.4rem;
  border: 2px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
  z-index: 5;
}

.card-stats {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  margin: 0;
  flex-wrap: wrap;
}

.card-stats span {
  font-size: 0.75rem;
  font-weight: 900;
  padding: 0.25rem 0.5rem;
  border-radius: 6px;
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.6));
  text-shadow: 0 1px 3px rgba(0, 0, 0, 1);
  border: 1px solid rgba(255, 255, 255, 0.15);
}


.stat-damage {
  color: #ff6b6b;
  border: 1px solid rgba(255, 107, 107, 0.4);
  background: linear-gradient(135deg, rgba(255, 77, 77, 0.2), rgba(185, 28, 28, 0.2));
}

.stat-shield {
  color: #4facfe;
  border: 1px solid rgba(79, 172, 254, 0.4);
  background: linear-gradient(135deg, rgba(79, 172, 254, 0.2), rgba(0, 242, 254, 0.2));
}

.stat-heal {
  color: #51cf66;
  border: 1px solid rgba(72, 187, 120, 0.4);
  background: linear-gradient(135deg, rgba(72, 187, 120, 0.2), rgba(81, 207, 102, 0.2));
}


/* ANIMATIONS */
@keyframes float-dmg {
  0% {
    transform: translateY(0);
    opacity: 0;
  }

  20% {
    opacity: 1;
    transform: translateY(-20px) scale(1.5);
  }

  100% {
    transform: translateY(-100px);
    opacity: 0;
  }
}

.dmg-text {
  position: absolute;
  top: -50px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2rem;
  font-weight: 900;
  color: var(--accent-red);
  animation: float-dmg 1s forwards;
  pointer-events: none;
  z-index: 100;
  text-shadow: 0 4px 10px rgba(0, 0, 0, 1);
}

/* SCROLLBAR */
::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}

::-webkit-scrollbar-thumb {
  background: var(--accent-cyan);
  border-radius: 10px;
}

/* --- ADMIN PANEL --- */
.admin-toggle-btn {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 1000;
  background: var(--bg-card);
  border: 1px solid var(--glass-stroke);
  color: var(--text-dim);
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  transition: all 0.3s;
}

.admin-toggle-btn:hover {
  background: var(--glass);
  color: #fff;
  transform: rotate(90deg);
}

/* --- NEW ADMIN PANEL PRO BUTTON --- */
.admin-toggle-btn-pro {
  position: fixed;
  top: 1.5rem;
  right: 1.5rem;
  z-index: 9999;
  background: linear-gradient(135deg, #00f2fe, #4facfe);
  border: 2px solid rgba(0, 242, 254, 0.5);
  color: #000;
  padding: 0.8rem 1.5rem;
  border-radius: 50px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  font-size: 1rem;
  font-weight: 900;
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow: 0 10px 30px rgba(0, 242, 254, 0.4);
  animation: adminPulse 2s ease-in-out infinite;
}

.admin-toggle-btn-pro:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 0 15px 40px rgba(0, 242, 254, 0.6);
  background: linear-gradient(135deg, #4facfe, #00f2fe);
}

.admin-icon {
  font-size: 1.5rem;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.admin-label {
  font-size: 0.95rem;
  letter-spacing: 1px;
  text-transform: uppercase;
}

@keyframes adminPulse {
  0%, 100% {
    box-shadow: 0 10px 30px rgba(0, 242, 254, 0.4);
  }
  50% {
    box-shadow: 0 10px 40px rgba(0, 242, 254, 0.6);
  }
}
/* Old Admin Panel CSS removed - using AdminPanelPro.css instead */

/* SETUP PHASE ENHANCEMENTS */
.setup-item:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.2);
  transform: translateX(5px);
}

.setup-item.placing {
  border-color: var(--accent-cyan) !important;
  background: rgba(0, 242, 254, 0.15) !important;
  animation: pulse-border 1.5s infinite;
  opacity: 1 !important;
}

@keyframes pulse-border {
  0% {
    box-shadow: 0 0 0 0 rgba(0, 242, 254, 0.4);
  }

  70% {
    box-shadow: 0 0 0 10px rgba(0, 242, 254, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(0, 242, 254, 0);
  }
}


/* Drag & Drop Enhancements */
.setup-item[draggable="true"] {
  cursor: grab;
  user-select: none;
}

.setup-item[draggable="true"]:active {
  cursor: grabbing;
  opacity: 0.7;
}

.grid-slot.highlight {
  border-color: var(--accent-cyan);
  background: rgba(0, 242, 254, 0.05);
}

.grid-slot:hover {
  border-color: rgba(0, 242, 254, 0.5);
  background: rgba(0, 242, 254, 0.08);
}


/* ===== COMBAT ENHANCEMENTS ===== */

/* 1. Target Indicator - ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÉ‡∏Ñ‡∏£‡∏≠‡∏¢‡∏π‡πà */
.character-unit.target-locked {
  animation: targetPulse 0.8s ease-in-out infinite;
}

/* Setup Pool */
.setup-pool {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  overflow-y: auto;
  max-height: calc(100vh - 200px);
  padding-right: 0.5rem;
}

.setup-pool::-webkit-scrollbar {
  width: 4px;
}

.setup-pool::-webkit-scrollbar-thumb {
  background: var(--accent-cyan);
  border-radius: 10px;
}

.setup-item {
  cursor: pointer;
  position: relative;
}

.setup-item.placing {
  border-color: var(--accent-gold);
  background: rgba(246, 224, 94, 0.1);
  box-shadow: 0 0 20px rgba(246, 224, 94, 0.3);
}

.char-mini.dead {
  opacity: 0.4;
  filter: grayscale(1);
}

/* Chat Input */
.chat-input {
  width: 100%;
  padding: 0.8rem 1rem;
  border-radius: 12px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--glass-stroke);
  color: #fff;
  font-family: 'Outfit', sans-serif;
  font-size: 0.9rem;
  transition: all 0.3s;
}

.chat-input:focus {
  outline: none;
  border-color: var(--accent-cyan);
  background: rgba(0, 0, 0, 0.7);
  box-shadow: 0 0 15px rgba(0, 242, 254, 0.2);
}

.chat-input::placeholder {
  color: var(--text-dim);
}

/* Msg User Label */
.msg-user {
  font-size: 0.7rem;
  font-weight: 800;
  color: var(--accent-cyan);
  margin-bottom: 0.3rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Section Title */
.section-title {
  font-size: 0.75rem;
  font-weight: 900;
  letter-spacing: 2px;
  color: var(--text-dim);
  text-transform: uppercase;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--glass-stroke);
}

/* Round Badge */
.round-badge {
  display: inline-block;
  padding: 0.5rem 1.2rem;
  background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue));
  color: #000;
  font-weight: 900;
  font-size: 0.9rem;
  border-radius: 20px;
  letter-spacing: 1px;
  box-shadow: 0 4px 15px rgba(0, 242, 254, 0.3);
}

/* Target Locked Effect */
.target-locked {
  animation: targetPulse 0.8s ease-in-out;
  box-shadow: 0 0 20px rgba(255, 77, 77, 0.6);
}

@keyframes targetPulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(255, 77, 77, 0.7);
  }
  50% {
    box-shadow: 0 0 0 15px rgba(255, 77, 77, 0);
  }
}

.target-arrow {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2rem;
  animation: arrowBounce 0.6s ease-in-out infinite;
  filter: drop-shadow(0 0 10px rgba(255, 77, 77, 0.8));
  z-index: 50;
}

@keyframes arrowBounce {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(-10px); }
}

/* 2. Card Glow Effects - ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡πå‡∏î */
.battle-card {
  position: relative;
  overflow: visible;
}

.battle-card::before {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: 12px;
  padding: 2px;
  background: linear-gradient(135deg, transparent, transparent);
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s;
}

.battle-card.card-ultimate::before {
  background: linear-gradient(135deg, #ff4d4d, #ff8c00, #ff4d4d);
  animation: glowRotate 3s linear infinite;
}

.battle-card.card-passive::before {
  background: linear-gradient(135deg, #f6e05e, #ffd700, #f6e05e);
  animation: glowRotate 3s linear infinite;
}

.battle-card.card-normal::before {
  background: linear-gradient(135deg, var(--accent-cyan), var(--accent-blue), var(--accent-cyan));
  animation: glowRotate 3s linear infinite;
}

.battle-card:hover::before,
.battle-card.selected::before {
  opacity: 0.6;
}

@keyframes glowRotate {
  0% { filter: hue-rotate(0deg); }
  100% { filter: hue-rotate(360deg); }
}

/* 3. Character Hit Animation - ‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏î‡∏ô‡∏ï‡∏µ */
.character-unit.hit-shake {
  animation: hitShake 0.4s cubic-bezier(.36,.07,.19,.97) both;
}

@keyframes hitShake {
  10%, 90% { transform: translate3d(-2px, 0, 0); }
  20%, 80% { transform: translate3d(4px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-6px, 0, 0); }
  40%, 60% { transform: translate3d(6px, 0, 0); }
}

/* HP Bar Animation */
.hp-fill {
  transition: width 0.8s cubic-bezier(0.23, 1, 0.32, 1);
}

/* 4. Damage Numbers - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏î‡∏≤‡πÄ‡∏°‡∏à */
.dmg-text {
  position: absolute;
  top: -50px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 2.5rem;
  font-weight: 900;
  font-family: 'JetBrains Mono', monospace;
  animation: float-dmg 1.2s forwards;
  pointer-events: none;
  z-index: 100;
  text-shadow: 0 4px 10px rgba(0, 0, 0, 1);
}

.dmg-text.damage {
  color: #ff4d4d;
}

.dmg-text.crit {
  color: #ff8c00;
  font-size: 3rem;
  animation: float-dmg-crit 1.2s forwards;
}

.dmg-text.heal {
  color: #48bb78;
}

.dmg-text.block {
  color: #4facfe;
}

@keyframes float-dmg {
  0% {
    transform: translateX(-50%) translateY(0) scale(0.5);
    opacity: 0;
  }
  20% {
    opacity: 1;
    transform: translateX(-50%) translateY(-20px) scale(1.2);
  }
  100% {
    transform: translateX(-50%) translateY(-80px) scale(0.8);
    opacity: 0;
  }
}

@keyframes float-dmg-crit {
  0% {
    transform: translateX(-50%) translateY(0) scale(0.5) rotate(-10deg);
    opacity: 0;
  }
  20% {
    opacity: 1;
    transform: translateX(-50%) translateY(-20px) scale(1.5) rotate(5deg);
  }
  100% {
    transform: translateX(-50%) translateY(-100px) scale(1) rotate(0deg);
    opacity: 0;
  }
}

/* 5. Buff/Debuff Icons - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏ô‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ */
.status-effects {
  position: absolute;
  top: -15px;
  left: -15px;
  display: flex;
  gap: 4px;
  z-index: 10;
  flex-direction: row;
}

.status-icon {
  width: 28px;
  height: 28px;
  background: rgba(0, 0, 0, 0.8);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1rem;
  border: 2px solid rgba(255, 255, 255, 0.3);
  animation: statusPulse 1.5s ease-in-out infinite;
  position: relative;
}

.status-icon .status-count {
  position: absolute;
  bottom: -4px;
  right: -4px;
  background: rgba(255, 255, 255, 0.9);
  color: #000;
  font-size: 0.6rem;
  font-weight: 900;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

@keyframes statusPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

/* 6. Hover Effects - ‡∏ó‡∏∏‡∏Å element ‡∏ó‡∏µ‡πà‡∏Å‡∏î‡πÑ‡∏î‡πâ */
.btn-end-turn,
.battle-card,
.char-mini,
.setup-item,
.grid-slot,
.sticker-btn,
.edit-btn,
.admin-toggle-btn {
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.btn-end-turn:hover:not(:disabled) {
  transform: scale(1.05) translateY(-2px);
}

.char-mini:hover {
  transform: translateX(8px) scale(1.02);
}

.sticker-btn:hover {
  transform: scale(1.3) rotate(10deg);
}

.admin-toggle-btn:hover {
  transform: rotate(180deg) scale(1.1);
}

/* 7. Energy Animation - ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô */
.energy-orb {
  position: relative;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.energy-orb.energy-used {
  animation: energyDrain 0.6s ease-out;
}

@keyframes energyDrain {
  0% { transform: scale(1); }
  50% { transform: scale(0.8); opacity: 0.5; }
  100% { transform: scale(1); opacity: 1; }
}

.energy-particle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--accent-gold);
  border-radius: 50%;
  animation: energyFloat 1s ease-out forwards;
  pointer-events: none;
}

@keyframes energyFloat {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--tx), var(--ty)) scale(0);
    opacity: 0;
  }
}

/* 8. Combat Log - ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ */
.combat-log {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  background: var(--glass);
  border: 1px solid var(--glass-stroke);
  border-radius: 16px;
  padding: 1rem;
  overflow-y: auto;
  max-height: 300px;
  scroll-behavior: smooth;
}

.combat-log::-webkit-scrollbar {
  width: 4px;
}

.combat-log::-webkit-scrollbar-thumb {
  background: var(--accent-cyan);
  border-radius: 10px;
}

.log-entry {
  font-size: 0.8rem;
  padding: 0.5rem 0.8rem;
  background: rgba(255, 255, 255, 0.03);
  border-radius: 8px;
  border-left: 3px solid var(--glass-stroke);
  animation: logSlideIn 0.3s ease-out;
  line-height: 1.4;
}

.log-entry.log-damage {
  border-left-color: var(--accent-red);
  color: #ffb3b3;
}

.log-entry.log-heal {
  border-left-color: #48bb78;
  color: #b3f5d1;
}

.log-entry.log-info {
  border-left-color: var(--accent-cyan);
  color: #b3e5fc;
}

.log-entry.log-system {
  border-left-color: var(--accent-gold);
  color: #fff9c4;
  font-weight: 700;
}

@keyframes logSlideIn {
  from {
    transform: translateX(-20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Additional Polish */
.character-unit.attacking {
  z-index: 100;
}

.battle-stage {
  position: relative;
}

/* Tooltip for cards */
.battle-card:hover .card-tooltip {
  opacity: 1;
  visibility: visible;
}

.card-tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-10px);
  background: rgba(0, 0, 0, 0.95);
  padding: 0.8rem;
  border-radius: 8px;
  border: 1px solid var(--accent-cyan);
  font-size: 0.75rem;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s;
  z-index: 1000;
  pointer-events: none;
}


/* Grid HP Bar */
.grid-hp-bar {
  position: absolute;
  bottom: 5px;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  height: 16px;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
}

.grid-hp-fill {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  transition: width 0.8s cubic-bezier(0.23, 1, 0.32, 1);
  border-radius: 8px;
}

.grid-hp-bar span {
  position: relative;
  z-index: 1;
  font-size: 0.7rem;
  font-weight: 900;
  color: #fff;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 1);
  font-family: 'JetBrains Mono', monospace;
}

/* Energy Orb Enhancement */
.energy-orb {
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
}


/* ============================================
   CHARACTER IMAGE DISPLAY IN BATTLE
   ============================================ */

.character-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3));
  transition: all 0.3s ease;
}

/* Enhance sprite-box to handle images */
.sprite-box {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  z-index: 2;
}

/* When character has image, adjust emoji fallback */
.sprite-box:has(.character-image) {
  font-size: 0; /* Hide emoji if image exists */
}

/* Animation enhancements for images */
.character-unit.active .character-image {
  filter: drop-shadow(0 4px 12px rgba(255, 255, 255, 0.5)) brightness(1.2);
}

.character-unit.hit-effect .character-image {
  filter: drop-shadow(0 0 15px rgba(255, 77, 77, 0.8)) brightness(1.5);
}

.character-unit.dead .character-image {
  filter: grayscale(100%) opacity(0.3);
}

/* Target locked effect for images */
.character-unit.target-locked .character-image {
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)) brightness(1.3);
  animation: pulse-glow 0.5s ease-in-out infinite alternate;
}

@keyframes pulse-glow {
  from {
    filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9)) brightness(1.3);
  }
  to {
    filter: drop-shadow(0 0 30px rgba(255, 215, 0, 1)) brightness(1.5);
  }
}

/* Attacking animation for images */
.character-unit.active.attacking-right .character-image {
  animation: attack-bounce-right 0.6s ease-in-out;
}

.character-unit.active.attacking-left .character-image {
  animation: attack-bounce-left 0.6s ease-in-out;
}

@keyframes attack-bounce-right {
  0%, 100% { transform: translateX(0) scale(1); }
  30% { transform: translateX(-10px) scale(1.1); }
  60% { transform: translateX(30px) scale(1.2); }
}

@keyframes attack-bounce-left {
  0%, 100% { transform: translateX(0) scale(1); }
  30% { transform: translateX(10px) scale(1.1); }
  60% { transform: translateX(-30px) scale(1.2); }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .character-image {
    filter: drop-shadow(0 1px 4px rgba(0, 0, 0, 0.3));
  }
}


/* ============================================
   MOBILE LANDSCAPE MODE OPTIMIZATION
   ============================================ */

/* Detect mobile landscape (height < width and small height) */
@media (max-height: 500px) and (orientation: landscape) {
  
  /* Adjust overall layout */
  .app-wrapper {
    overflow-y: auto;
  }

  /* Compact header/top elements */
  .game-header,
  .setup-header {
    padding: 0.5rem 1rem;
    min-height: auto;
  }

  .game-header h1,
  .setup-header h1 {
    font-size: 1.2rem;
  }

  /* Battle Stage - Optimize for landscape */
  .battle-stage {
    flex-direction: row !important;
    gap: 1rem;
    padding: 0.5rem;
    align-items: center;
    justify-content: space-evenly;
  }

  /* Battle Grids - Side by side */
  .battle-grid {
    grid-template-columns: repeat(3, 1fr) !important;
    grid-template-rows: repeat(3, 1fr) !important;
    gap: 0.3rem;
    max-width: 280px;
    max-height: 280px;
  }

  .battle-grid.player-grid,
  .battle-grid.enemy-grid {
    width: 280px;
    height: 280px;
  }

  /* VS text smaller */
  .battle-stage > div[style*="fontSize"] {
    font-size: 1.5rem !important;
  }

  /* Grid slots smaller */
  .grid-slot {
    width: 90px !important;
    height: 90px !important;
    border-radius: 12px;
  }

  .sprite-box {
    font-size: 2rem;
  }

  .character-image {
    max-width: 80px;
    max-height: 80px;
  }

  /* HP bars compact */
  .grid-hp-bar {
    height: 18px;
    font-size: 0.65rem;
  }

  .element-badge {
    width: 20px;
    height: 20px;
    font-size: 0.7rem;
  }

  /* Status effects smaller */
  .status-effects {
    gap: 2px;
    top: 2px;
    right: 2px;
  }

  .status-icon {
    width: 18px;
    height: 18px;
    font-size: 0.6rem;
  }

  /* Sidebar compact */
  .sidebar-left,
  .sidebar-right {
    width: 200px;
    padding: 0.5rem;
  }

  /* Character mini cards */
  .char-mini {
    padding: 0.4rem;
    gap: 0.3rem;
  }

  .char-mini-emoji {
    font-size: 1.5rem;
  }

  .char-mini div {
    font-size: 0.75rem !important;
  }

  /* Hand cards smaller */
  .hand-container {
    padding: 0.5rem;
    max-height: 140px;
  }

  .hand-card {
    width: 90px;
    height: 120px;
    padding: 0.4rem;
  }

  .card-title {
    font-size: 0.7rem !important;
  }

  .card-stats {
    font-size: 0.65rem;
  }

  .energy-cost {
    width: 22px;
    height: 22px;
    font-size: 0.8rem;
  }

  /* Action buttons compact */
  .action-buttons {
    gap: 0.5rem;
    padding: 0.5rem;
  }

  .btn-primary,
  .btn-secondary,
  .btn-danger {
    padding: 0.5rem 1rem;
    font-size: 0.85rem;
  }

  /* Energy display */
  .energy-display {
    font-size: 1.2rem;
    padding: 0.4rem 0.8rem;
  }

  /* Timer compact */
  .timer-display {
    font-size: 1rem;
    padding: 0.4rem 0.8rem;
  }

  /* Logs compact */
  .logs-panel {
    max-height: 100px;
    font-size: 0.75rem;
  }

  /* Combat logs */
  .combat-logs-panel {
    max-height: 100px;
  }

  .combat-log-item {
    padding: 0.3rem 0.5rem;
    font-size: 0.7rem;
  }

  /* Passive skills bar */
  .passive-skills-bar {
    padding: 0.4rem;
    gap: 0.4rem;
  }

  .passive-badge {
    padding: 0.3rem 0.5rem;
    gap: 0.3rem;
  }

  .passive-char-emoji {
    width: 20px;
    height: 20px;
    font-size: 0.7rem;
  }

  .passive-label {
    font-size: 0.6rem;
  }

  /* Setup phase adjustments */
  .setup-content {
    flex-direction: row;
    gap: 1rem;
  }

  .char-pool {
    max-height: none;
    flex: 1;
  }

  .team-setup {
    flex: 1;
  }

  .grid-3x3 {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
    max-width: 300px;
  }

  .grid-slot-setup {
    width: 95px;
    height: 95px;
  }

  /* Victory/Defeat screens */
  .result-screen {
    padding: 1rem;
  }

  .result-title {
    font-size: 2rem;
  }

  .result-team {
    gap: 0.5rem;
  }

  .result-char {
    width: 60px;
    height: 80px;
  }

  .result-char-emoji {
    font-size: 1.5rem;
  }

  /* Admin panel adjustments */
  .admin-toggle-btn-pro {
    width: 45px;
    height: 45px;
    font-size: 1.2rem;
  }

  /* Damage numbers */
  .dmg-text {
    font-size: 1.2rem;
  }

  /* Target arrow */
  .target-arrow {
    font-size: 1.5rem;
  }
}

/* Extra small landscape (very short screens) */
@media (max-height: 400px) and (orientation: landscape) {
  
  .battle-grid {
    max-width: 240px;
    max-height: 240px;
  }

  .battle-grid.player-grid,
  .battle-grid.enemy-grid {
    width: 240px;
    height: 240px;
  }

  .grid-slot {
    width: 75px !important;
    height: 75px !important;
  }

  .sprite-box {
    font-size: 1.5rem;
  }

  .character-image {
    max-width: 65px;
    max-height: 65px;
  }

  .sidebar-left,
  .sidebar-right {
    width: 180px;
  }

  .hand-card {
    width: 75px;
    height: 100px;
  }
}

/* Tablet landscape optimization */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  
  .battle-grid {
    max-width: 350px;
    max-height: 350px;
  }

  .battle-grid.player-grid,
  .battle-grid.enemy-grid {
    width: 350px;
    height: 350px;
  }

  .grid-slot {
    width: 110px !important;
    height: 110px !important;
  }

  .sprite-box {
    font-size: 3rem;
  }

  .character-image {
    max-width: 100px;
    max-height: 100px;
  }

  .sidebar-left,
  .sidebar-right {
    width: 220px;
  }

  .hand-card {
    width: 100px;
    height: 135px;
  }
}

/* Force landscape message for very small portrait screens */
@media (max-width: 500px) and (orientation: portrait) and (max-height: 700px) {
  
  .landscape-hint {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 242, 254, 0.9);
    color: #000;
    padding: 0.8rem 1.5rem;
    border-radius: 50px;
    font-weight: 700;
    font-size: 0.9rem;
    z-index: 9999;
    animation: bounce 2s ease-in-out infinite;
    box-shadow: 0 4px 20px rgba(0, 242, 254, 0.5);
  }

  @keyframes bounce {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-10px); }
  }
}

/* Improve touch targets for mobile */
@media (hover: none) and (pointer: coarse) {
  
  /* Larger touch targets */
  .btn-primary,
  .btn-secondary,
  .btn-danger,
  .hand-card,
  .grid-slot,
  .char-mini {
    min-height: 44px; /* iOS recommended minimum */
  }

  /* Prevent text selection on touch */
  .hand-card,
  .grid-slot,
  .char-mini,
  .btn-primary,
  .btn-secondary {
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  /* Better touch feedback */
  .hand-card:active,
  .grid-slot:active,
  .btn-primary:active,
  .btn-secondary:active {
    transform: scale(0.95);
    transition: transform 0.1s ease;
  }
}


/* ============================================
   CHARACTER CARD DISPLAY IN BATTLE
   ============================================ */

/* Container for character card */
.character-card-display {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* Character card image - ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
.character-card-image {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  object-position: center;
  image-rendering: -webkit-optimize-contrast;
  image-rendering: crisp-edges;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.5));
  transition: all 0.3s ease;
  border-radius: 8px;
}

/* Emoji fallback display */
.character-emoji-display {
  font-size: 5rem;
  line-height: 1;
  transition: all 0.3s ease;
}

/* Animation enhancements for card images */
.character-unit.active .character-card-image {
  filter: drop-shadow(0 6px 20px rgba(255, 255, 255, 0.6)) brightness(1.2);
  transform: scale(1.05);
}

.character-unit.active .character-emoji-display {
  transform: scale(1.1);
  filter: drop-shadow(0 4px 12px rgba(255, 255, 255, 0.5));
}

.character-unit.hit-effect .character-card-image {
  filter: drop-shadow(0 0 20px rgba(255, 77, 77, 0.9)) brightness(1.5);
  animation: shake 0.3s ease-in-out;
}

.character-unit.hit-effect .character-emoji-display {
  animation: shake 0.3s ease-in-out;
  filter: drop-shadow(0 0 15px rgba(255, 77, 77, 0.8));
}

.character-unit.dead .character-card-image {
  filter: grayscale(100%) opacity(0.3);
  transform: scale(0.9);
}

.character-unit.dead .character-emoji-display {
  filter: grayscale(100%) opacity(0.3);
  transform: scale(0.9);
}

/* Target locked effect for card images */
.character-unit.target-locked .character-card-image {
  filter: drop-shadow(0 0 25px rgba(255, 215, 0, 1)) brightness(1.3);
  animation: pulse-glow-card 0.5s ease-in-out infinite alternate;
}

.character-unit.target-locked .character-emoji-display {
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.9));
  animation: pulse-glow-card 0.5s ease-in-out infinite alternate;
}

@keyframes pulse-glow-card {
  from {
    filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.9)) brightness(1.3);
  }
  to {
    filter: drop-shadow(0 0 35px rgba(255, 215, 0, 1)) brightness(1.5);
  }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px) rotate(-2deg); }
  75% { transform: translateX(5px) rotate(2deg); }
}

/* Attacking animation for card images */
.character-unit.active.attacking-right .character-card-image,
.character-unit.active.attacking-right .character-emoji-display {
  animation: attack-bounce-right 0.6s ease-in-out;
}

.character-unit.active.attacking-left .character-card-image,
.character-unit.active.attacking-left .character-emoji-display {
  animation: attack-bounce-left 0.6s ease-in-out;
}

@keyframes attack-bounce-right {
  0%, 100% { transform: translateX(0) scale(1); }
  30% { transform: translateX(-15px) scale(1.1); }
  60% { transform: translateX(40px) scale(1.2); }
}

@keyframes attack-bounce-left {
  0%, 100% { transform: translateX(0) scale(1); }
  30% { transform: translateX(15px) scale(1.1); }
  60% { transform: translateX(-40px) scale(1.2); }
}

/* Responsive adjustments for card display */
@media (max-width: 768px) {
  .character-card-image {
    max-width: 80px;
    max-height: 120px;
  }
  
  .character-emoji-display {
    font-size: 2rem;
  }
}

@media (max-width: 480px) {
  .character-card-image {
    max-width: 65px;
    max-height: 100px;
  }
  
  .character-emoji-display {
    font-size: 1.5rem;
  }
}

@media (min-width: 1200px) {
  .character-card-image {
    max-width: 120px;
    max-height: 180px;
  }
  
  .character-emoji-display {
    font-size: 3rem;
  }
}


/* ============================================
   SKILL CARD IMAGE DISPLAY IN HAND
   ============================================ */

.battle-card-image {
  position: relative;
  width: 140px;
  height: auto;
  cursor: pointer;
  transition: all 0.3s ease;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.5));
}

.battle-card-image:hover {
  transform: translateY(-10px) scale(1.05);
  filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.7));
  z-index: 10;
}

.battle-card-image.selected {
  transform: translateY(-20px) scale(1.1);
  filter: drop-shadow(0 0 25px rgba(0, 242, 254, 0.8)) drop-shadow(0 8px 20px rgba(0, 0, 0, 0.7));
  z-index: 15;
}

.battle-card-image.combo-card {
  filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.8)) drop-shadow(0 8px 20px rgba(0, 0, 0, 0.7));
}

.battle-card-image.discard-marked {
  filter: drop-shadow(0 0 20px rgba(255, 77, 77, 0.8)) grayscale(50%);
  opacity: 0.7;
}

.skill-card-img {
  width: 100%;
  height: auto;
  border-radius: 12px;
  display: block;
}

.card-selected-overlay {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 40px;
  height: 40px;
  background: rgba(0, 242, 254, 0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: 900;
  color: #000;
  box-shadow: 0 4px 12px rgba(0, 242, 254, 0.5);
  animation: pulse-check 0.6s ease-in-out infinite alternate;
}

@keyframes pulse-check {
  from { transform: scale(1); }
  to { transform: scale(1.1); }
}

.card-discard-overlay {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 40px;
  height: 40px;
  background: rgba(255, 77, 77, 0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  box-shadow: 0 4px 12px rgba(255, 77, 77, 0.5);
}

.combo-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: linear-gradient(135deg, #ffd700 0%, #ff8c42 100%);
  color: #000;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 900;
  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.5);
  animation: pulse-combo 0.8s ease-in-out infinite alternate;
}

@keyframes pulse-combo {
  from { 
    transform: scale(1);
    box-shadow: 0 4px 12px rgba(255, 215, 0, 0.5);
  }
  to { 
    transform: scale(1.05);
    box-shadow: 0 6px 16px rgba(255, 215, 0, 0.8);
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .battle-card-image {
    width: 100px;
  }
  
  .card-selected-overlay,
  .card-discard-overlay {
    width: 30px;
    height: 30px;
    font-size: 18px;
  }
  
  .combo-badge {
    font-size: 10px;
    padding: 4px 8px;
  }
}

@media (max-width: 480px) {
  .battle-card-image {
    width: 80px;
  }
  
  .card-selected-overlay,
  .card-discard-overlay {
    width: 25px;
    height: 25px;
    font-size: 14px;
  }
  
  .combo-badge {
    font-size: 9px;
    padding: 3px 6px;
  }
}
